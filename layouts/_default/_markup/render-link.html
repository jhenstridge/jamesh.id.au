{{- $link := .Destination }}
{{- $url := urls.Parse $link }}
{{- $isRemote := $url.IsAbs }}
{{- if and (not $isRemote) (strings.HasSuffix $url.Path ".md") }}
  {{- $link = relref .Page $link }}
{{- end -}}
<a href="{{ $link | safeURL }}"{{ with .Title }} title="{{.}}"{{ end }}>{{ .Text | safeHTML }}</a>
